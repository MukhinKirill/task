# Цель задачи
* Написать библиотеку для интеграции продукта с системой клиента.

### Описание взаимодействия продукта с системой клиента
* Продукт подгружает библиотеку во время работы и с её помощью работает с необходимой системой.
* Продукт использует методы чтения, которые определены в интерфейсе для создания целевой картины.
* Продукт использует методы изменения для управления целевой картиной на основании имеющейся целевой картины.

### Описание системы клиента
Система представляет собой сервис для технического обслуживания.
Внутри сервиса существуют пользователи(User), имеющие свойства(Properties) и права(RequestRight и ItRole).
Свойства пользователя(его атрибуты) имеют постоянный состав(lastName, firstName, middleName, telephoneNumber, isLead). Стоит отметить, что Логин является уникальным идентификатором пользователя в системе и свойством не является!
Права(RequestRight и ItRole) позволяют пользователю выполнять те или иные операции в системе(например просмотривать необходимые для пользователя отчеты)
Список актуальных прав будет находится в соотвутствующих таблицах после развертывания/заполнения бд через утилиту Task.Integration.Data.DbCreationUtility, которая будет описана ниже.
Инициализация конфигурации конектора происходит через метод StartUp и обязательное требование - наличие пустого конструктора.

# Таблицы БД:
* Таблица с пользователями User(все столбцы ненулевые);
* Таблица с паролями Passwords(все столбцы ненулевые);
* Таблица с правами по изменению заявок RequestRight;
* Таблица с ролями исполнителей ItRole;
* Таблицы для связи пользователей и прав UserItRole, UserRequestRight(Все столбцы ненулевые, изменение прав пользователя состоит в добавлении и удалении данных из этих таблиц);

#### Команды:
Task.Integration.Data.DbCreationUtility.exe -s "Server=localhost;Port=5438;Database=my_db;Username=Kolleper;Password=123456;" -p "POSTGRE"

# Структура решения:
* Task.Connector.Tests - проект с тестами коннектора(Все тесты пройдены);
* Task.Connector - проект с реализуемым коннектором

# Задание
* Развернуть бд (Postgres) в Docker или с помощью других средств; ## Выполнено.
* Заполнить тестовыми данными с помощью утилиты Avanpost.Integration.DbCreationUtility; ## Выполнено.
* Реализовать интерфейс коннектора: ## Выполнено.
```csharp
        public ILogger Logger { get; set; }
        void StartUp(string connectionString); //Конфигурация коннектора через строку подключения (настройки для подключения к ресурсу(строка подключения к бд, 
        // путь к хосту с логином и паролем, дополнительные параметры конфигурации бизнес-логики и тд, формат любой, например: "key1=value1;key2=value2...";
        
		void CreateUser(UserToCreate user); // Создать пользователя с набором свойств по умолчанию.
		bool IsUserExists(string userLogin); // Проверка существования пользователя
        
		IEnumerable<Property> GetAllProperties(); // Метод позволяет получить все свойства пользователя(смотри Описание системы), пароль тоже считать свойством
        IEnumerable<UserProperty> GetUserProperties(string userLogin); // Получить все значения свойств пользователя
        void UpdateUserProperties(IEnumerable<UserProperty> properties, string userLogin);// Метод позволяет устанавливать значения свойств пользователя
        
		IEnumerable<Permission> GetAllPermissions();// Получить все права в системе (смотри Описание системы клиента)
        void AddUserPermissions(string userLogin, IEnumerable<string> rightIds);// Добавить права пользователю в системе
        void RemoveUserPermissions(string userLogin, IEnumerable<string> rightIds);// Удалить права пользователю в системе
        IEnumerable<string> GetUserPermissions(string userLogin);// Получить права пользователя в системе
```

# Требования по реализации интерфейса коннектора
* Коннектор реализует интерфейс IConnector (все методы интерфейса);
* Коннектор проходит все тесты
* Коннектор не изменяет данные в таблицах RequestRights и ItRole;
* Коннектор использует логирование через свойство Logger;
* При работе с Permission разделяет ItRole и RequestRight, то есть коннектор всегда понимает с каким Permission работает, а продукт просто использует права, прочитанные коннектором;

